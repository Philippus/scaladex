@import ch.epfl.scala.index.newModel.ContributingProject
@import ch.epfl.scala.search.SearchParams


@(project: ContributingProject, hideProjectInfo: Boolean = false, params: Option[SearchParams] = None)
@if(!hideProjectInfo) {
<div class="content-project-header">
  <a href="/@project.organization/@project.repository">
    @githubUserAvatar(project.githubInfo)
    <h4>@project.organization/@project.repository</h4>
</div>
}
<div class="content-project-body">
  @for(github <- project.githubInfo) {
    @github.description.map(desc => <p class="description">@desc</p>)
    @params.filter(_.contributingSearch).map { p =>
      <ul>
      @for(issue <- project.displayedIssues.take(6)) {
        <li>
          <a href="@issue.url.target" target="_blank">@issue</a>
        </li>
      }
      </ul>

      @if(6 < project.displayedIssues.length) {
          @for(label <- github.beginnerIssuesLabel) {
              @if(project.beginnerIssueHits.nonEmpty) {
                  <a href='https://github.com/@{project.reference}/issues?utf8=âœ“&q=is:open label:"@label" @{p.queryString}'
                  target="_blank">More Issues ...</a>
              } else {
                  <a href="https://github.com/@{project.reference}/labels/@{label}"
                  target="_blank">More Issues ...</a>
              }
          }
      }
    }.getOrElse {
      <ul>
        @project.displayedIssues.take(3).map(issue => <a href="@issue.url.target" target="_blank">@issue</a>)
      </ul>

      @if(3 < project.displayedIssues.length) {
          @for(label <- github.beginnerIssuesLabel) {
              <a href="https://github.com/@{project.reference}/labels/@{label}"
              target="_blank">More Issues ...</a>
          }
      }
    }
    <hr>
    @github.contributingGuide.map(guide => <a href="@guide.target" target="_blank">Contributing Guide</a>)
    @github.chatroom.map(chatroom => <a href="@chatroom.target" target="_blank">Chatroom</a>)
    @github.codeOfConduct.map(coc => <a href="@coc.target" target="_blank">Code of Conduct</a>)
  }
</div>