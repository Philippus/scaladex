@import ch.epfl.scala.index.newModel.Project
@import ch.epfl.scala.index.newModel.ReleaseDependency
@import ch.epfl.scala.index.views.Formats

@(ref: Project.Reference, allDeps: Seq[ReleaseDependency.Direct])
@internalDeps = @{allDeps.filter(_.isInternal(ref)).sorted}
@remainingDeps =   @{allDeps.filterNot(_.isInternal(ref)).sorted}
<div class="dependencies box">
  <h4>@Formats.plural(remainingDeps.size, "dependency", "dependencies")</h4>
  @dependencyBlock(remainingDeps)
</div>

@if(internalDeps.nonEmpty) {
<div class="dependencies box">
  <h4>@Formats.plural(internalDeps.size, "internal dependency", "internal dependencies")</h4>
  @dependencyBlock(internalDeps)
</div>
}

@* reusable code block for dependency listing *@
@dependencyBlock(dependencies: Seq[ReleaseDependency.Direct]) = {
  <ul>
  @for(fullDep <- dependencies){
    <li>
      <a href="@fullDep.url" target="_blank">
        @fullDep.name
      </a>
      v@{fullDep.version}
      <span class="label label-primary">@fullDep.releaseDep.scope</span>
    </li>
  }
  </ul>
}
