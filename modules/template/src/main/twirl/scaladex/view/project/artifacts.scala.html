@import scaladex.core.model._
@import scaladex.view.html.main
@import scaladex.view.html._
@import scaladex.core.web.ArtifactsPageParams
@import scaladex.core.model.Language
@import scaladex.core.model.Platform
@import scala.collection.SortedMap
@import scaladex.core.util.ScalaExtensions._
@import scaladex.core.util.TimeUtils
@import scaladex.view.Formats

@import java.time.Instant

@(
    env: Env,
    user: Option[UserState],
    project: Project,
    header: Option[ProjectHeader],
    groupedArtifacts: Map[SemanticVersion, Seq[Artifact]]
)

@main(env, title = project.repository.toString, user) {
  <main id="container-project">
    @headproject(env, user, project, header, "Artifacts")
    <div class="container">
      <div class="content-project artifacts box" data-organization="@project.reference.organization"
      data-repository="@project.reference.repository">
        <div class="artifacts-filter">
          <div class="result-count">
            <b>@groupedArtifacts.size</b> @Formats.wordPlural(groupedArtifacts.size, "version") found
          </div>
        </div>
        @if(groupedArtifacts.isEmpty) {
          <div>We can't find any artifacts for this project.</div>
        } else {
          <div>
            @for((version, artifacts) <- groupedArtifacts.toSeq.sortBy(_._1).reverse) {
              <h3>Version @version</h3>
              <ul>
                @for(artifact <- artifacts) {
                  <li>
                    <span>@artifact.artifactName</span>
                  </li>
                }
              </ul>
            }
          </div>
        }
      </div>
    </div>
  </main>
}
